# 前言
本文主要介绍从c语言文件到可执行文件生成的过程，目标平台是Linux，设计ELF等知识。

# 什么是链接？
一个项目可能会存在多个c文件(本文只探讨c文件)，每个c文件会被编译成.o文件，最后将这些.o文件<mark style="background: #BBFABBA6;">链接</mark>起来，形成一个可执行的文件。

## 如何链接？
这里分为两种情况：
- 裸机
- 有操作系统

`区别就是操作系统提供了系统调用，并且可执行程序是由操作系统加载到内存执行的，而裸机我们只需要把程序放到对应位置，那就一直执行我们的程序。`

本文主要讨论有Linux操作系统的情况下。Linux加载运行的是ELF格式的可执行文件，因为要运行程序，涉及到要给这个程序分配空间，还要提供系统调用、库函数的支持，所以必须得有固定格式，而Linux选择了ELF作为其可执行二进制文件的格式。

所以再倒推，.o文件要合并成ELF的可执行文件，合并工作就是链接器做的(这也是为啥叫链接)，为了方便链接器合并，.o文件也是ELF格式的(.o和可执行文件的ELF内容有所不同)，所以GCC在编译的时候，从.c文件生成了ELF格式的.o文件(是由预编译、编译、汇编三步完成的)。

> ELF：Executable and linkable format

计算机中没有魔法，ELF也没有，后面内容会详细展开ELF的主要内容，ELF文件里面主要包含了<mark style="background: #D2B3FFA6;">代码的符号信息</mark>，<mark style="background: #FF5582A6;">因为多个文件之间的联系就是符号，要么一个文件使用了另一个文件的函数，要么使用了另一个文件全局变量，仅此而已。合并的工作就是要保证，合并之后的可执行二进制内部相互调用是没有问题的。</mark>

# 生成.o文件








