真正的发现之旅并非是去新的地方，而是拥有一双新的眼睛。
									—马塞尔·普鲁斯特（1871–1922）

这本书是一次发现之旅。你将学习三件事:如何计算机系统工作时，如何把复杂的问题分解成可管理的模块，以及如何构建大规模的软硬件系统。这将是一个动手的旅程，因为你创建一个完整的和工作的电脑系统从头开始。你将学到的教训，远不止这些比电脑本身重要的是，这些都会作为副作用而获得结构。根据心理学家卡尔·罗杰斯的说法，“唯一的一种对行为有重大影响的学习是自我发现的自我占有的真理已经被经验同化了。”这引言部分简述了一些发现、真相和未来的经历。

# 你好，下面的世界

如果您有一些编程经验，您可能遇到过在你的早期训练中，类似下面的程序。如果你没有，您仍然可以猜测程序正在做什么:它显示文本
Hello World并终止。这个特殊的程序是用Jack--简单的，类似java的高级语言编写的：

![](https://raw.githubusercontent.com/later-3/img_picgo/main/img/20230815213005.png)

像 Hello World 这样的小程序看起来很简单，想想在计算机上实际运行这样一个程序需要什么？让我们看看引擎盖下面。首先，请注意这个程序什么也不是存储在文本文件中的纯字符序列抽象对于计算机来说是一个完全的谜，它只能理解用机器语言写的指令。因此，如果我们要执行这个程序，我们必须做的第一件事是解析字符串的找出高级代码的语义ーー找出其中的内容然后生成重新表达的低级代码这种语义使用目标计算机的机器语言这个复杂的翻译过程的结果，即所谓的编译，将是一个机器语言指令的可执行序列。

当然，机器语言也是一种抽象——一种商定的集合二进制代码。要使这种抽象具体化，就必须通过一些硬件架构。而这个架构，反过来又被实现了通过一组特定的芯片——寄存器、存储器、加法器等等。现在,
每一个硬件设备都是由底层构建的，基本逻辑门。而这些门，反过来，可以从原始的像NAND和NOR。这些原始的门很低层次结构，但它们也通常由几个交换设备组成由晶体管实现。每个晶体管都是由——嗯，我们就讲到这里，因为计算机科学到此为止了，物理的开始。

你可能会想:“在我的电脑上，编译和运行程序就容易多了——我所要做的就是点击这个图标或者写那个命令!”的确，现代计算机系统就像一座沉没的冰山:大多数人只能看到顶部，以及他们的计算机知识系统是粗略和肤浅的。不过，如果你想深入探究表面上，那么幸运的你!那里有一个迷人的世界计算机科学中一些最美丽的东西。一个亲密的对这个地下世界的理解是将naïve程序员与其他程序员区别开来的地方高级开发人员——能够创建复杂硬件和软件技术。理解这些的最好方法是技术起作用了——我们的意思是深入了解它们“骨头”就是从头开始构建一个完整的计算机系统。

# Nand to Tetris
假设我们想从头开始构建一个计算机系统，我们应该建造哪台特定的计算机?事实证明，每台通用计算机——每台个人电脑、智能手机或服务器——都是俄罗斯方块的Nand机器。首先，所有的计算机本质上都是基于基本逻辑的门，其中Nand在工业中应用最广泛(我们将解释)
在第1章中，Nand门到底是什么?第二，通用的计算机可以编程运行俄罗斯方块游戏，以及其他任何游戏能满足你兴趣的程序。因此，两者都没有什么独特之处Nand或俄罗斯方块。正是《俄罗斯方块》里的“to”这个词把这本书变成了你即将踏上的神奇旅程:一路从一堆简陋的转换设备连接到一台大脑的机器具有文字、图形、动画、音乐、视频、分析、仿真、人工等功能智能，以及我们期望从通用计算机中获得的所有功能。因此，具体是哪一个并不重要硬件平台和软件层次我们将建立，只要他们将基于相同的思想和技术的特点计算系统。

图1描述了《Nand to Tetris》路线图中的关键里程碑。从图的最底层开始，任何通用计算机都有包含一个算术逻辑单元和一个随机存储器的体系结构(随机存取存储器)。所有的ALU和RAM设备都是由基本逻辑门。令人惊讶而又幸运的是，我们很快就会看，所有的逻辑门都可以单独由与门组成。专注于软件层次，所有高级语言都依赖于一套翻译
(编译器/解释器，虚拟机，汇编器)用于减少高级代码一直到机器级指令。一些高级语言是解释的而不是编译的，有些语言不使用虚函数
机器，但大体是一样的。这个观察结果是一个基本的计算机科学原理的表现，被称为丘奇-图灵猜想:所有的计算机本质上都是等价的。

![](https://raw.githubusercontent.com/later-3/img_picgo/main/img/202308152157496.png)

图1 .1典型计算机系统的主要模块，由硬件平台和虚拟机组成
软件的层次结构。每个模块都有一个抽象视图(也称为模块的接口)和一个实现。右指向的箭头表示每个模块都是使用抽象实现的从下一层开始构建模块。每个圆代表一个Nand到俄罗斯方块项目和章节总共十二个项目和章节。

我们做这些观察是为了强调我们的普遍性方法:挑战、见解、提示、技巧、技术和术语你将在这本书中遇到的和那些完全一样由实践硬件和软件工程师遇到。在这方面，《俄罗斯方块》是一种入门形式:如果你能完成这段旅程，你将为自己成为一名铁杆计算机专业人士打下良好的基础。

那么，我们应该在《俄罗斯方块》中构建哪种特定的硬件平台，以及哪种特定的高级语言呢?一种可能是建立一个工业强度的、广泛使用的计算机模型，并为一种流行的高级语言编写编译器。我们反对这些选择，原因有三。首先，计算机模型来来去去，热门的编程语言让位于新的编程语言。因此，我们不想提交任何特定的硬件/软件配置。第二，电脑和在实践中使用的语言具有许多没有什么指导价值的细节，但需要很长时间才能实现。最后，我们寻求一个易于控制、理解和扩展的硬件平台和软件层次结构。这些考虑导致了本书第一部分中构建的计算机平台Hack和第二部分中实现的高级语言Jack的诞生。

通常，计算机系统是自顶向下描述的，这表明级别的抽象可以被简化为更简单的抽象，或者通过更简单的抽象来实现。例如，我们可以描述在计算机体系结构上执行的二进制机器指令是如何被分解成微码的，这些微码通过体系结构的线路传播，并最终操纵低级ALU和RAM芯片。或者，我们可以自底向上，描述如何明智地设计ALU和RAM芯片来执行微代码，这些微代码组合在一起，形成二进制机器指令。自顶向下和自底向上的方法都很有启发性，每一种方法都给我们将要构建的系统提供了不同的视角。

nand可以构造任意的逻辑函数

